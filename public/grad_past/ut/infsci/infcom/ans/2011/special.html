<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>東京大学 情報理工学系研究科 電子情報学専攻 2011年度 専門科目</title>
<!--#include virtual="/common/header.html" -->
</head>
<body>
<!--#include virtual="/common/navbar.html" -->	

	<div class="container well well-lg" style="background: red well">
		<h3>東京大学 情報理工学系研究科 電子情報学専攻 2011年度 専門科目</h3>
		<hr />

		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title">第2問</h3>
			</div>
			<div class="panel-body">
				<h2>(1)</h2>
				<p>・初期参照ミス</p>
				<p>通常一度も参照していないブロックがキャッシュ内に存在することは無いため、初めて参照するブロックに対してのミスが発生する。</p>
				<p>・競合性ミス</p>
				<p>同じインデックスを持つ別のブロックを参照することによるミス。</p>
				<p>・容量性ミス</p>
				<p>キャッシュインするためにやむを得ず既にキャッシュ内にあるラインをキャッシュアウトせざるを得ない場合によるミス。</p>
				<br> <br>

				<h2>(2)</h2>
				<p>フルアソシアティブ方式は主記憶上のブロックがキャッシュの全てのブロックに対応付けられるため、競合性ミスは起こり得ない。</p>
				<br> <br>

				<h2>(3)</h2>
				<p>連想度を大きくすればするほど競合性ミスが起こる頻度を減らすことが出来ると考えられる。</p>
				<br> <br>

				<h2>(4)</h2>
				<p>主記憶上にあるページテーブルを参照し、目的データの位置を把握する。</p>
				<p>目的のデータが主記憶上にある場合は、キャッシュに送信する。</p>
				<p>補助記憶装置上にある場合は、補助記憶装置から主記憶に目的データを送信し、主記憶からキャッシュに送信する手間が掛かる。</p>
				<br> <br>

				<h2>(5)</h2>
				<p>TLB(Translation Lookaside Buffer)</p>
				<p>時間的局所性、空間的局所を生かし、ページテープルのように最近参照したブロック、頻繁に参照されるブロックの仮想アドレスと物理アドレスの対応関係を専用の高速なバッファーに記録しておき、データ参照の際はまずTLBで目的のブロックが確認してから、無い場合にページテープルにアクセスする。ページテープルは主記憶上にあるゆえ遅いため、これを改善するために考案されたアドレス変換の高速化手法。</p>
				<br> <br>

				<h2>(6)</h2>
				<p align="center">物理アドレス 31bit</p>
				<div align="center">
					<table class="logic">
						<tr>
							<td>31-12=19より<br>インデックス（タグ）19bit
							</td>
							<td>log2(4KB) = 12より<br>ページ内オフセット 12bit
							</td>
						</tr>

					</table>
				</div>
				<br> <br>

				<p align="center">仮想アドレス 32bit</p>
				<div align="center">
					<table class="logic">
						<tr>
							<td>32 – 12 = 20より <br>インデックス（タグ） 20bit
							</td>
							<td>log2(4KB) = 12より<br>ページ内オフセット 12bit
							</td>
						</tr>
					</table>
				</div>
				<br> <br>

				<p align="center">TLB1エントリ</p>
				<div align="center">
					<table class="logic">
						<tr>
							<td>有向ビット(1bit)</td>
							<td>仮想アドレスタグ(20bit)</td>
							<td>物理アドレスタグ(19bit)</td>
						</tr>
					</table>
				</div>
				<p align="center">計40bit = 5Byte</p>
				<br>
				<p>64エントリあるので、</p>
				<p>64 * 5Byte = 320Byte</p>
				<br> <br>

				<h2>(7)</h2>
				<p>TLBに目的とするエントリが無い場合は、主記憶上にあるページテーブルにアクセスしてアドレス変換を行う。この際にこの変換の記録をTLBの空きエントリに記録する。空きエントリが存在しない場合はエントリが一つ空けられ、そこに入れる。</p>
				<br>
				<p></p>
				<p>ページ内オフセットを利用してTLBへのアクセスと同時にキャッシュにアクセスしたデータのタグと、ページテーブルによって得た物理アドレスとの比較を行い、同一なら目的とするデータであることが分かる。</p>
				<br> <br>

				<h2>(8)</h2>
				<p>ページフォールト</p>
				<br> <br>
				<h2>(9)</h2>
				<p>通常主記憶と補助記憶装置の間ではライトバック方式が用いられている。スワップ対象のブロックを補助記憶装置上の対応するブロックに書き込んだ後に、新たに読み込むブロックを主記憶上のスワップ対象ブロックに上書きし、さらにキャッシュ上に当該ブロックを同様の処理でコピーしてデータを読み込む。この際にページテーブルとTLBの更新も行われる。</p>
				<br> <br>

				<h2>(10)</h2>
				<p>１ライン64Byteで、1語が4Byteなので、1ラインには16語を格納。</p>
				<p>語を特定するのにlog16 = 4bit必要。語内オフセットでlog4 = 2bit必要</p>
				<p>以上からページ内オフセットの構成は、</p>
				<br>
				<div align="center">
					<table class="logic">
						<tr>
							<td>有向ビット(12-4-2 = 6bit)</td>
							<td>ワードオフセット(4bit)</td>
							<td>ワード内オフセット(2bit)</td>
						</tr>
					</table>
				</div>
				<br>
				<p>２ウェイセットアソシアティブなので、</p>
				<p>2^6個のセットが存在。</p>
				<p>ライン数は2^6*2より、2^7個</p>
				<p>１ラインは64=2^6バイトなので、</p>
				<p>2^7 * 2^6 = 2^3 * 2^10 = 8Kbyteとなる。</p>
				<br> <br>

				<h2>(11)</h2>
				<p>並列型物理アドレスキャッシュはTLBを用いて仮想アドレスを物理アドレスに変換するのと同時に、ページ内オフセットを用いてキャッシュ中のセットを特定するという強みがあったが、直列型物理アドレスキャッシュではTLBを用いて仮想アドレスを物理アドレスに変換した後にキャッシュにアクセスし、目的の語を特定するために、比較的遅い。</p>
				<br> <br>

				<h2>(12)</h2>
				<p>仮想アドレスキャッシュもTLBにアクセスするのと同時に仮想ページアドレスを用いてキャッシュにアクセスするため語のアクセスまでの時間が短いが、２つの仮想アドレスが一つの物理アドレスを指す問題が発生する。これをエイリアスと呼ぶ。</p>
				<p>エイリアスの検出のためには仮想アドレスをTLBを用いて物理アドレスに変換したものと、仮想アドレスを用いてキャッシュにアクセスして得られた物理アドレスと比較する必要がある。</p>

			</div>
		</div>
	</div>

</body>
</html>

